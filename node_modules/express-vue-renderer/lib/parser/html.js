'use strict';

var pug = require('pug');
var htmlMinify = require('html-minifier');

function htmlParser(templateObject, minify) {
    return new Promise(function (resolve, reject) {
        var parsedString = '';
        if (!templateObject && templateObject.content) {
            reject(new Error('No template section'));
        } else {
            if (templateObject.lang === 'pug' || templateObject.lang === 'jade') {
                parsedString = pug.compile(templateObject.content, {})({});
            }
            if (minify) {
                if (parsedString === '') {
                    parsedString = htmlMinify.minify(templateObject.content, {
                        collapseWhitespace: true
                    });
                } else {
                    parsedString = htmlMinify.minify(parsedString, {
                        collapseWhitespace: true
                    });
                }
            }
            resolve(parsedString);
        }
    });
}

module.exports = htmlParser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXJzZXIvaHRtbC5qcyJdLCJuYW1lcyI6WyJwdWciLCJyZXF1aXJlIiwiaHRtbE1pbmlmeSIsImh0bWxQYXJzZXIiLCJ0ZW1wbGF0ZU9iamVjdCIsIm1pbmlmeSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicGFyc2VkU3RyaW5nIiwiY29udGVudCIsIkVycm9yIiwibGFuZyIsImNvbXBpbGUiLCJjb2xsYXBzZVdoaXRlc3BhY2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUNBLElBQU1BLE1BQWFDLFFBQVEsS0FBUixDQUFuQjtBQUNBLElBQU1DLGFBQWFELFFBQVEsZUFBUixDQUFuQjs7QUFXQSxTQUFTRSxVQUFULENBQW9CQyxjQUFwQixFQUF3REMsTUFBeEQsRUFBMEY7QUFDdEYsV0FBTyxJQUFJQyxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3BDLFlBQUlDLGVBQWUsRUFBbkI7QUFDQSxZQUFJLENBQUNMLGNBQUQsSUFBbUJBLGVBQWVNLE9BQXRDLEVBQStDO0FBQzNDRixtQkFBTyxJQUFJRyxLQUFKLENBQVUscUJBQVYsQ0FBUDtBQUNILFNBRkQsTUFFTztBQUNILGdCQUFHUCxlQUFlUSxJQUFmLEtBQXdCLEtBQXhCLElBQWlDUixlQUFlUSxJQUFmLEtBQXdCLE1BQTVELEVBQW9FO0FBQ2hFSCwrQkFBZVQsSUFBSWEsT0FBSixDQUFZVCxlQUFlTSxPQUEzQixFQUFtQyxFQUFuQyxFQUF1QyxFQUF2QyxDQUFmO0FBQ0g7QUFDRCxnQkFBSUwsTUFBSixFQUFZO0FBQ1Isb0JBQUlJLGlCQUFpQixFQUFyQixFQUF5QjtBQUNyQkEsbUNBQWVQLFdBQVdHLE1BQVgsQ0FBa0JELGVBQWVNLE9BQWpDLEVBQTBDO0FBQ3JESSw0Q0FBb0I7QUFEaUMscUJBQTFDLENBQWY7QUFHSCxpQkFKRCxNQUlPO0FBQ0hMLG1DQUFlUCxXQUFXRyxNQUFYLENBQWtCSSxZQUFsQixFQUFnQztBQUMzQ0ssNENBQW9CO0FBRHVCLHFCQUFoQyxDQUFmO0FBR0g7QUFDSjtBQUNEUCxvQkFBUUUsWUFBUjtBQUNIO0FBQ0osS0FyQk0sQ0FBUDtBQXNCSDs7QUFHRE0sT0FBT0MsT0FBUCxHQUFpQmIsVUFBakIiLCJmaWxlIjoiaHRtbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5jb25zdCBwdWcgICAgICAgID0gcmVxdWlyZSgncHVnJyk7XG5jb25zdCBodG1sTWluaWZ5ID0gcmVxdWlyZSgnaHRtbC1taW5pZmllcicpO1xuXG50eXBlIFRlbXBsYXRlT2JqZWN0VHlwZSA9IHtcbiAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICBjb250ZW50OiAnc3RyaW5nJyxcbiAgICBzdGFydDogbnVtYmVyLFxuICAgIGF0dHJzOiB7IGxhbmc6ICdzdHJpbmcnIH0sXG4gICAgbGFuZzogJ3N0cmluZycsXG4gICAgZW5kOiBudW1iZXJcbiB9XG5cbmZ1bmN0aW9uIGh0bWxQYXJzZXIodGVtcGxhdGVPYmplY3Q6IFRlbXBsYXRlT2JqZWN0VHlwZSwgbWluaWZ5OiBib29sZWFuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgcGFyc2VkU3RyaW5nID0gJyc7XG4gICAgICAgIGlmICghdGVtcGxhdGVPYmplY3QgJiYgdGVtcGxhdGVPYmplY3QuY29udGVudCkge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignTm8gdGVtcGxhdGUgc2VjdGlvbicpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKHRlbXBsYXRlT2JqZWN0LmxhbmcgPT09ICdwdWcnIHx8IHRlbXBsYXRlT2JqZWN0LmxhbmcgPT09ICdqYWRlJykge1xuICAgICAgICAgICAgICAgIHBhcnNlZFN0cmluZyA9IHB1Zy5jb21waWxlKHRlbXBsYXRlT2JqZWN0LmNvbnRlbnQse30pKHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaW5pZnkpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkU3RyaW5nID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWRTdHJpbmcgPSBodG1sTWluaWZ5Lm1pbmlmeSh0ZW1wbGF0ZU9iamVjdC5jb250ZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZVdoaXRlc3BhY2U6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkU3RyaW5nID0gaHRtbE1pbmlmeS5taW5pZnkocGFyc2VkU3RyaW5nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZVdoaXRlc3BhY2U6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZShwYXJzZWRTdHJpbmcpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBodG1sUGFyc2VyO1xuIl19